#! /usr/bin/env python

import roslib; roslib.load_manifest('nao_world_msgs')
import rospy
import actionlib
from naoqi import ALProxy
from nao_world_msgs.msg import *

class KickActionServer:
  def __init__(self):
    self.server = actionlib.SimpleActionServer('/nao_world_msgs/kick_action_server', KickAction, self.execute, False)
    self.server.start()
    rospy.loginfo("Kick Action Server started.")

  def execute(self, goal):
    # Do lots of awesome groundbreaking robot stuff here
    self.kick()
    self.server.set_succeeded()
    
  def kick(self):
    names = list()
    times = list()
    keys = list()

    names.append("HeadYaw")
    times.append([ 0.50000, 2.00000, 3.10000, 4.50000, 4.70000, 5.90000, 7.00000, 8.00000, 9.00000, 10.00000])
    keys.append([ 0.01223, 0.00609, 0.00763, 0.00609, 0.01070, 0.00609, -0.00158, -0.00004, -0.00158, -0.01078])

    names.append("HeadPitch")
    times.append([ 0.50000, 2.00000, 3.10000, 4.50000, 4.70000, 5.90000, 7.00000, 8.00000, 9.00000, 10.00000])
    keys.append([ 0.01530, 0.03677, 0.03217, 0.03984, 0.03984, 0.04905, 0.05058, 0.05058, 0.05058, 0.01990])

    names.append("LShoulderPitch")
    times.append([ 0.50000, 2.00000, 3.10000, 4.50000, 4.70000, 5.90000, 7.00000, 8.00000, 9.00000, 10.00000])
    keys.append([ 1.41737, 1.47873, 1.49101, 1.49101, 1.50941, 1.50328, 1.52015, 1.52629, 1.52782, 1.40970])

    names.append("LShoulderRoll")
    times.append([ 0.50000, 2.00000, 3.10000, 4.50000, 4.70000, 5.90000, 7.00000, 8.00000, 9.00000, 10.00000])
    keys.append([ 0.30522, 0.29755, 0.28528, 0.28375, 0.28221, 0.29602, 0.30062, 0.30062, 0.28375, 0.34357])

    names.append("LElbowYaw")
    times.append([ 0.50000, 2.00000, 3.10000, 4.50000, 4.70000, 5.90000, 7.00000, 8.00000, 9.00000, 10.00000])
    keys.append([ -1.38985, -1.38831, -1.38064, -1.38831, -1.38831, -1.39291, -1.38678, -1.38678, -1.38524, -1.38678])

    names.append("LElbowRoll")
    times.append([ 0.50000, 2.00000, 3.10000, 4.50000, 4.70000, 5.90000, 7.00000, 8.00000, 9.00000, 10.00000])
    keys.append([ -1.02467, -1.01700, -1.01700, -1.02160, -1.01547, -1.01086, -1.00166, -1.00013, -1.00013, -1.04308])

    names.append("LWristYaw")
    times.append([ 0.50000, 2.00000, 3.10000, 4.50000, 4.70000, 5.90000, 7.00000, 8.00000, 9.00000, 10.00000])
    keys.append([ -0.00004, 0.00456, -0.00004, 0.01376, 0.00303, 0.01376, -0.00004, 0.00149, 0.00303, 0.00456])

    names.append("LHand")
    times.append([ 0.50000, 2.00000, 3.10000, 4.50000, 4.70000, 5.90000, 7.00000, 8.00000, 9.00000, 10.00000])
    keys.append([ 0.00020, 0.00022, 0.00020, 0.00020, 0.00023, 0.00020, 0.00020, 0.00020, 0.00020, 0.00020])

    names.append("RShoulderPitch")
    times.append([ 0.50000, 2.00000, 3.10000, 4.50000, 4.70000, 5.90000, 7.00000, 8.00000, 9.00000, 10.00000])
    keys.append([ 1.42666, 1.50643, 1.48035, 1.47882, 1.44660, 1.49109, 1.50643, 1.50490, 1.50490, 1.44200])

    names.append("RShoulderRoll")
    times.append([ 0.50000, 2.00000, 3.10000, 4.50000, 4.70000, 5.90000, 7.00000, 8.00000, 9.00000, 10.00000])
    keys.append([ -0.32985, -0.58756, -0.26542, -0.27156, -1.28860, -0.25929, -0.24548, -0.24548, -0.24548, -0.30224])

    names.append("RElbowYaw")
    times.append([ 0.50000, 2.00000, 3.10000, 4.50000, 4.70000, 5.90000, 7.00000, 8.00000, 9.00000, 10.00000])
    keys.append([ 1.38976, 1.72724, 1.36368, 1.36829, 1.42504, 1.36368, 1.35755, 1.35755, 1.35908, 1.39130])

    names.append("RElbowRoll")
    times.append([ 0.50000, 2.00000, 3.10000, 4.50000, 4.70000, 5.90000, 7.00000, 8.00000, 9.00000, 10.00000])
    keys.append([ 1.02015, 0.03491, 1.01555, 1.01402, 0.03993, 1.01402, 1.00941, 1.00788, 1.00941, 1.04623])

    names.append("RWristYaw")
    times.append([ 0.50000, 2.00000, 3.10000, 4.50000, 4.70000, 5.90000, 7.00000, 8.00000, 9.00000, 10.00000])
    keys.append([ 0.00763, 0.01530, 0.00456, 0.01837, 0.01683, 0.01837, 0.00763, 0.00763, 0.00609, 0.00303])

    names.append("RHand")
    times.append([ 0.50000, 2.00000, 3.10000, 4.50000, 4.70000, 5.90000, 7.00000, 8.00000, 9.00000, 10.00000])
    keys.append([ 0.00015, 0.00016, 0.00015, 0.00016, 0.00017, 0.00016, 0.00016, 0.00016, 0.00015, 0.00016])

    names.append("LHipYawPitch")
    times.append([ 0.50000, 2.00000, 3.10000, 4.50000, 4.70000, 5.90000, 7.00000, 8.00000, 9.00000, 10.00000])
    keys.append([ 0.00464, 0.00464, 0.00464, 0.00464, 0.00311, 0.00464, 0.00311, 0.00311, 0.00464, -0.00456])

    names.append("LHipRoll")
    times.append([ 0.50000, 2.00000, 3.10000, 4.50000, 4.70000, 5.90000, 7.00000, 8.00000, 9.00000, 10.00000])
    keys.append([ 0.00004, 0.07674, 0.07521, 0.07367, 0.07521, -0.01070, -0.00916, -0.01376, -0.01376, 0.00464])

    names.append("LHipPitch")
    times.append([ 0.50000, 2.00000, 3.10000, 4.50000, 4.70000, 5.90000, 7.00000, 8.00000, 9.00000, 10.00000])
    keys.append([ -0.43408, -0.63043, -0.63197, -0.63197, -0.63197, -0.59975, -0.60129, -0.59975, -0.59975, -0.42488])

    names.append("LKneePitch")
    times.append([ 0.50000, 2.00000, 3.10000, 4.50000, 4.70000, 5.90000, 7.00000, 8.00000, 9.00000, 10.00000])
    keys.append([ 0.70100, 1.06149, 1.05842, 1.05688, 1.05842, 1.05075, 1.05688, 1.05228, 1.05228, 0.69639])

    names.append("LAnklePitch")
    times.append([ 0.50000, 2.00000, 3.10000, 4.50000, 4.70000, 5.90000, 7.00000, 8.00000, 9.00000, 10.00000])
    keys.append([ -0.35133, -0.49706, -0.49706, -0.49706, -0.50166, -0.49246, -0.49859, -0.49399, -0.49706, -0.34519])

    names.append("LAnkleRoll")
    times.append([ 0.50000, 2.00000, 3.10000, 4.50000, 4.70000, 5.90000, 7.00000, 8.00000, 9.00000, 10.00000])
    keys.append([ 0.00618, 0.21787, 0.21787, 0.21940, 0.21787, 0.21480, 0.21634, 0.21480, 0.21020, 0.00004])

    names.append("RHipRoll")
    times.append([ 0.50000, 2.00000, 3.10000, 4.50000, 4.70000, 5.90000, 7.00000, 8.00000, 9.00000, 10.00000])
    keys.append([ -0.00303, -0.00149, -0.25614, -0.37886, 0.15191, 0.14884, 0.14731, 0.13197, 0.02612, -0.00149])

    names.append("RHipPitch")
    times.append([ 0.50000, 2.00000, 3.10000, 4.50000, 4.70000, 5.90000, 7.00000, 8.00000, 9.00000, 10.00000])
    keys.append([ -0.43263, -0.43416, -0.43416, -0.69494, -0.72716, -0.72716, -1.05697, -0.75630, -0.53387, -0.44030])

    names.append("RKneePitch")
    times.append([ 0.50000, 2.00000, 3.10000, 4.50000, 4.70000, 5.90000, 7.00000, 8.00000, 9.00000, 10.00000])
    keys.append([ 0.69648, 0.69648, 0.69801, 0.04913, 0.05833, 0.06140, 0.59063, 1.54325, 0.94805, 0.69801])

    names.append("RAnklePitch")
    times.append([ 0.50000, 2.00000, 3.10000, 4.50000, 4.70000, 5.90000, 7.00000, 8.00000, 9.00000, 10.00000])
    keys.append([ -0.35124, -0.34818, -0.34971, 0.43110, 0.43110, 0.43110, 0.54001, -1.07376, -0.54299, -0.34204])

    names.append("RAnkleRoll")
    times.append([ 0.50000, 2.00000, 3.10000, 4.50000, 4.70000, 5.90000, 7.00000, 8.00000, 9.00000, 10.00000])
    keys.append([ 0.00158, 0.00158, 0.00158, 0.00004, 0.00158, 0.00004, 0.00925, 0.00925, 0.00311, 0.00311])

    try:
      # uncomment the following line and modify the IP if you use this script outside Choregraphe.
      motion = ALProxy("ALMotion", "192.168.105.15", 9559)
      motion.stiffnessInterpolation("Body", 1.0, 0.1)
      #motion.walkInit()
      motion.angleInterpolation(names, keys, times, True);
    except BaseException, err:
      print err
    
if __name__ == '__main__':
  rospy.init_node('kick_action_server')
  server = KickActionServer()
  rospy.spin()
